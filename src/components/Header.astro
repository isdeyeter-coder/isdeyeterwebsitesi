---
// src/components/Header.astro

const menuItems = [
  {
    label: '',
    icon: 'fas fa-home',
    to: '/',
    
  },
  {
    label: 'Şirket Kur',
    icon: 'fas fa-building',
    to: '/sirket-kur',
    
  },
  {
    label: 'Yapay Zeka',
    icon: 'fas fa-robot',
    children: [
    { label: 'AI Destek Chatbot', to: '/ai-destek-chatbot', icon: 'fas fa-robot' },
    { label: 'Robot Server', to: '/robot-server', icon: 'fas fa-robot' },
    { label: 'AI Robot', to: '/ai-robot', icon: 'fas fa-rocket' },
    { label: 'E-Mutabakat', to: '/e-mutabakat', icon: 'fas fa-calculator' },
    { label: 'WhatsApp Chatbot', to: '/ai-destek-chatbot', icon: 'fab fa-whatsapp' },
    { label: 'İnstagram Chatbot', to: '/ai-destek-chatbot', icon: 'fab fa-instagram' },
    { label: 'Web Site Chatbot', to: '/ai-destek-chatbot', icon: 'fas fa-globe' }

    ]
  },
  {
    label: 'Yazılım',
    icon: 'fas fa-laptop-code',
    children: [
      { label: 'Dijital İşler', to: '/dijital-isler', icon: 'fas fa-desktop' },
      { label: 'E-Ticaret Paketleri', to: '/e-ticaret-paketleri', icon: 'fas fa-shopping-cart' },
      { label: 'Web Paketleri', to: '/web-paketleri', icon: 'fas fa-globe' },
      { label: 'Muhasebe Paketleri', to: '/muhasebe-paketleri', icon: 'fas fa-calculator' },
      { label: 'Muhasebe Programı Özellikleri', to: '/muhasebe-programinin-ozellikleri', icon: 'fas fa-chart-line' },
      { label: 'SEO ve Pazarlama', to: '/seo-ve-pazarlama-paketleri', icon: 'fas fa-search' },
      { label: 'Bulut Muhasebe', to: '/neden-bulut-muhasebe-yazilimi', icon: 'fas fa-cloud' },
      { label: 'Dijitalde Yerini Al', to: '/dijital-isler-ekibi', icon: 'fas fa-rocket' },
      { label: 'Dijital Pazarlama', to: '/dijital-pazarlama-hizmetleri', icon: 'fas fa-bullhorn' }
      
    ]
  },
  {
    label: 'Donanım & Server',
    icon: 'fas fa-server',
    children: [
      
      { label: 'IT Çözümleri', to: '/it-cozumleri', icon: 'fas fa-tools' },
      { label: 'Sunucu Kiralama', to: '/sunucu-kiralama', icon: 'fas fa-cloud-upload-alt' },
      { label: 'Domain Hosting', to: '/domain-hosting', icon: 'fas fa-hdd' },
      { label: 'cPanel Hosting', to: '/cpanel-hosting', icon: 'fas fa-cpanel' },
      { label: 'Ekonomik Hosting', to: '/ekonomik-hosting', icon: 'fas fa-server' },
      { label: 'SSL Sertifikası', to: '/ssl-sertifikasi', icon: 'fas fa-shield-alt' }
      
    ]
  },
  {
    label: 'Hizmetler',
    icon: 'fas fa-concierge-bell',
    children: [
     { label: 'Psikolog Hizmetleri', to: '/psikolog-hizmetleri', icon: 'fas fa-heart' },
     { label: 'Online Psikolog', to: '/online-psikolog', icon: 'fas fa-user-md' },
      { label: 'Dijital İşler', to: '/dijital-isler', icon: 'fas fa-desktop' },
      { label: 'Temizlik', to: '/temizlik', icon: 'fas fa-broom' },
      { label: 'Nakliyat', to: '/nakliyat', icon: 'fas fa-truck' },
      { label: 'Tamirat', to: '/tamirat', icon: 'fas fa-tools' },
      { label: 'Tadilat', to: '/tadilat', icon: 'fas fa-hammer' },
      { label: 'Organizasyon', to: '/organizasyon', icon: 'fas fa-calendar-alt' },
      { label: 'Sağlık', to: '/psikolog-hizmetleri', icon: 'fas fa-heartbeat' },
      { label: 'Özel Ders', to: '/ozel-ders', icon: 'fas fa-graduation-cap' },
      { label: 'Online Psikolog Randevu', to: '/online-psikolog-randevu', icon: 'fas fa-calendar-check' }
    ]
  },
  {
    label: 'Biz',
    icon: 'fas fa-building',
    children: [
      { label: 'Gizlilik Politikası', to: '/gizlilik-politikasi', icon: 'fas fa-shield-alt' },
      { label: 'İletişim', to: '/iletisim', icon: 'fas fa-envelope' },
      { label: 'Bayimiz Olun', to: '/bayimiz-olun', icon: 'fas fa-handshake' },
      { label: 'Site Haritası', to: '/sitemap', icon: 'fas fa-sitemap' }
    ]
  },
  {
    label: 'İş de yeter!',
    icon: 'fas fa-bullhorn',
    to: '/isdeyeter',
    
  },
  {
    label: '',
    icon: 'fab fa-whatsapp',
    to: 'https://wa.me/905412465429?text=Merhaba,%20%C4%B0%C5%9F%20De%20Yeter%20hakk%C4%B1nda%20bilgi%20almak%20istiyorum',
   },
   {
    label: '',
    icon: 'fab fa-instagram',
    to: 'https://www.instagram.com/isdeyeter/',
   },
   {
    label: '',
    icon: 'fab fa-linkedin-in',
    to: 'https://www.linkedin.com/company/isdeyeter',
   }
];
---

<header class="header" id="header">
    <div class="container">
        <div class="header-content">
            <!-- Logo -->
            <a href="/" class="logo">
                <img src="/img/isdeyeter-logo-5000px.png" alt="İşDeYeter Logo" style="width: 70px; height: auto;">
                </a>
            
            <!-- Navigation -->
            <nav>
                <ul class="nav-menu" id="navMenu">
                    {menuItems.map((item, index) => (
                        <li class="nav-dropdown">
                            {item.to ? (
                                <a href={item.to} class="nav-link">
                                    <i class={item.icon} style="margin-right: 8px;"></i>
                                    {item.label}
                                </a>
                            ) : (
                                <a href="javascript:void(0)" class="nav-link">
                                    <i class={item.icon} style="margin-right: 8px;"></i>
                                    {item.label}
                                    <i class="fas fa-chevron-down" style="margin-left: 5px; font-size: 12px;"></i>
                                </a>
                            )}
                            
                            {item.children && (
                                <div class="dropdown-content">
                                    {item.children.map((child, childIndex) => (
                                        <a href={child.to} class="dropdown-item">
                                            <i class={child.icon}></i>
                                            {child.label}
                                        </a>
                                    ))}
                                </div>
                            )}
                        </li>
                    ))}
                </ul>
                
                <button class="mobile-toggle" id="mobileToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </div>
</header>

<style>
/* Header Styles */
.header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    transition: all 0.3s ease;
}

.header.scrolled {
    background: rgba(255, 255, 255, 0.98);
    box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
}

.container {
    width: 100%;
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 20px;
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 0;
}

.logo {
    display: flex;
    align-items: center;
    text-decoration: none;
}

/* Navigation */
nav {
    position: relative;
}

.nav-menu {
    display: flex;
    gap: 25px;
    list-style: none;
    margin: 0;
    padding: 0;
}

.nav-dropdown {
    position: relative;
}

.nav-link {
    color: #1F2937;
    text-decoration: none;
    font-weight: 500;
    font-size: 15px;
    padding: 10px 0;
    display: flex;
    align-items: center;
    transition: color 0.2s;
}

.nav-link:hover {
    color: #3B82F6;
}

/* Dropdown */
.dropdown-content {
    position: absolute;
    top: 100%;
    left: 0;
    background: white;
    min-width: 220px;
    border-radius: 8px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    padding: 10px 0;
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all 0.3s ease;
    z-index: 1000;
}

.nav-dropdown:hover .dropdown-content {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.dropdown-item {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #374151;
    text-decoration: none;
    padding: 10px 15px;
    font-size: 14px;
    transition: all 0.2s;
}

.dropdown-item i {
    width: 16px;
    text-align: center;
    color: #6B7280;
}

.dropdown-item:hover {
    background: rgba(59, 130, 246, 0.1);
    color: #3B82F6;
}

.dropdown-item:hover i {
    color: #3B82F6;
}

/* Mobile Toggle */
.mobile-toggle {
    display: none;
    font-size: 24px;
    color: #1F2937;
    cursor: pointer;
    background: none;
    border: none;
    padding: 5px;
}

/* Responsive */
@media (max-width: 1024px) {
    .nav-menu {
        gap: 20px;
    }
}

@media (max-width: 768px) {
    .nav-menu {
        display: none;
        position: fixed;
        top: 70px;
        left: 0;
        right: 0;
        background: white;
        flex-direction: column;
        padding: 20px;
        box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
        border-radius: 0 0 12px 12px;
        gap: 0;
        max-height: calc(100vh - 70px);
        overflow-y: auto;
        z-index: 999;
    }
    
    .nav-menu.active {
        display: flex;
    }
    
    .nav-dropdown {
        width: 100%;
    }
    
    .nav-link {
        padding: 12px 0;
        width: 100%;
        border-bottom: 1px solid #f0f0f0;
    }
    
    .nav-link:last-child {
        border-bottom: none;
    }
    
    .dropdown-content {
        position: static;
        opacity: 1;
        visibility: visible;
        transform: none;
        box-shadow: none;
        background: rgba(0,0,0,0.02);
        padding-left: 20px;
        margin-top: 5px;
        display: none;
        border-left: 2px solid #3B82F6;
    }
    
    .nav-dropdown.active .dropdown-content {
        display: block;
    }
    
    .mobile-toggle {
        display: block;
    }
    
    /* Dropdown item'ları daha belirgin yapalım */
    .dropdown-item {
        padding: 10px 15px 10px 25px;
        margin: 5px 0;
        border-radius: 6px;
        background: rgba(255,255,255,0.5);
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const mobileToggle = document.getElementById('mobileToggle');
    const navMenu = document.getElementById('navMenu');
    const header = document.getElementById('header');
    
    if (mobileToggle && navMenu) {
        // Mobile menu toggle
        mobileToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            navMenu.classList.toggle('active');
            
            // İkon değiştir
            const icon = mobileToggle.querySelector('i');
            if (navMenu.classList.contains('active')) {
                icon.className = 'fas fa-times';
                // Body scroll'u engelle
                document.body.style.overflow = 'hidden';
            } else {
                icon.className = 'fas fa-bars';
                // Body scroll'u geri getir
                document.body.style.overflow = '';
            }
        });
        
        // Mobile dropdown toggle
        const dropdownParents = document.querySelectorAll('.nav-dropdown');
        dropdownParents.forEach(parent => {
            const link = parent.querySelector('.nav-link');
            // Sadece href="javascript:void(0)" olanlara click event ekle
            if (link.getAttribute('href') === 'javascript:void(0)') {
                link.addEventListener('click', function(e) {
                    if (window.innerWidth <= 768) {
                        e.preventDefault();
                        e.stopPropagation();
                        parent.classList.toggle('active');
                        
                        // Diğer dropdown'ları kapat
                        dropdownParents.forEach(otherParent => {
                            if (otherParent !== parent) {
                                otherParent.classList.remove('active');
                            }
                        });
                    }
                });
            }
        });
        
        // Close menu when clicking outside on mobile
        document.addEventListener('click', function(e) {
            if (window.innerWidth <= 768 && navMenu.classList.contains('active')) {
                if (!navMenu.contains(e.target) && !mobileToggle.contains(e.target)) {
                    navMenu.classList.remove('active');
                    mobileToggle.querySelector('i').className = 'fas fa-bars';
                    document.body.style.overflow = '';
                    
                    // Tüm dropdown'ları kapat
                    dropdownParents.forEach(parent => {
                        parent.classList.remove('active');
                    });
                }
            }
        });
        
        // Link tıklamalarında menüyü kapat
        const allLinks = navMenu.querySelectorAll('a[href]:not([href="javascript:void(0)"])');
        allLinks.forEach(link => {
            link.addEventListener('click', function() {
                if (window.innerWidth <= 768) {
                    navMenu.classList.remove('active');
                    mobileToggle.querySelector('i').className = 'fas fa-bars';
                    document.body.style.overflow = '';
                }
            });
        });
    }
    
    // Header scroll effect
    if (header) {
        window.addEventListener('scroll', function() {
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
    }
    
    // Window resize'da menüyü düzelt
    window.addEventListener('resize', function() {
        if (window.innerWidth > 768 && navMenu) {
            navMenu.classList.remove('active');
            document.body.style.overflow = '';
            
            if (mobileToggle) {
                mobileToggle.querySelector('i').className = 'fas fa-bars';
            }
        }
    });
});

</script>